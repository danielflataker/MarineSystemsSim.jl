<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · MarineSystemsSim.jl</title><meta name="title" content="Getting started · MarineSystemsSim.jl"/><meta property="og:title" content="Getting started · MarineSystemsSim.jl"/><meta property="twitter:title" content="Getting started · MarineSystemsSim.jl"/><meta name="description" content="Documentation for MarineSystemsSim.jl."/><meta property="og:description" content="Documentation for MarineSystemsSim.jl."/><meta property="twitter:description" content="Documentation for MarineSystemsSim.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MarineSystemsSim.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a><ul class="internal"><li><a class="tocitem" href="#1.-Quick-start:-Fossen-style-derivatives"><span>1. Quick start: Fossen-style derivatives</span></a></li><li><a class="tocitem" href="#2.-Lower-level-usage:-build-HydroParams3DOF-by-hand"><span>2. Lower-level usage: build <code>HydroParams3DOF</code> by hand</span></a></li><li><a class="tocitem" href="#3.-Units-and-automatic-differentiation"><span>3. Units and automatic differentiation</span></a></li></ul></li><li><a class="tocitem" href="../model_3dof/">3-DOF model</a></li><li><a class="tocitem" href="../api/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/danielflataker/MarineSystemsSim.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h1><p>This page walks through two typical workflows:</p><ol><li><strong>Fossen-style quick start</strong> (recommended): use <a href="../api/#MarineSystemsSim.hydroparams_fossen3dof"><code>hydroparams_fossen3dof</code></a> with manoeuvring derivatives.</li><li><strong>Lower-level setup</strong>: build <code>HydroParams3DOF</code> from your own matrices.</li></ol><p>We assume you will also use an ODE solver, e.g.:</p><pre><code class="language-julia hljs">using DifferentialEquations   # or OrdinaryDiffEq if you prefer</code></pre><hr/><h2 id="1.-Quick-start:-Fossen-style-derivatives"><a class="docs-heading-anchor" href="#1.-Quick-start:-Fossen-style-derivatives">1. Quick start: Fossen-style derivatives</a><a id="1.-Quick-start:-Fossen-style-derivatives-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Quick-start:-Fossen-style-derivatives" title="Permalink"></a></h2><h3 id="1.1-Define-parameters"><a class="docs-heading-anchor" href="#1.1-Define-parameters">1.1 Define parameters</a><a id="1.1-Define-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#1.1-Define-parameters" title="Permalink"></a></h3><p>The 3-DOF model uses:</p><ul><li><a href="../api/#MarineSystemsSim.RigidBody3DOF"><code>RigidBody3DOF</code></a> for mass, inertia, and CG position,</li><li><a href="../api/#MarineSystemsSim.HydroParams3DOF"><code>HydroParams3DOF</code></a> for added mass and damping,</li><li><a href="../api/#MarineSystemsSim.VesselParams3DOF"><code>VesselParams3DOF</code></a> as a container,</li><li><a href="../api/#MarineSystemsSim.hydroparams_fossen3dof"><code>hydroparams_fossen3dof</code></a> as a convenience constructor from Fossen-style derivatives.</li></ul><pre><code class="language-julia hljs">using MarineSystemsSim
using StaticArrays

# Rigid-body parameters
rb = RigidBody3DOF(10.0, 25.0, 1.5)

# Hydrodynamic coefficients (Fossen-style)
Xudot =  1.0
Yvdot =  2.0
Yrdot =  0.3
Nrdot =  0.7

Xu  = -1.0
Yv  = -0.5
Yr  = -0.2
Nv  = -0.3
Nr  = -0.7

Xuu = -0.1
Yvv = -0.2
Nrr = -0.3

hydro = hydroparams_fossen3dof(
    Xudot, Yvdot, Yrdot, Nrdot,
    Xu,    Yv,    Yr,    Nv,    Nr,
    Xuu,   Yvv,   Nrr;
    # Optional cross-derivatives:
    Xv = 0.0,
    Xr = 0.0,
    Yu = 0.0,
    Nu = 0.0,
)

params = VesselParams3DOF(rb, hydro)</code></pre><h3 id="1.2-Build-a-cached-model"><a class="docs-heading-anchor" href="#1.2-Build-a-cached-model">1.2 Build a cached model</a><a id="1.2-Build-a-cached-model-1"></a><a class="docs-heading-anchor-permalink" href="#1.2-Build-a-cached-model" title="Permalink"></a></h3><p><a href="../api/#MarineSystemsSim.build_cached_vessel"><code>build_cached_vessel</code></a> precomputes:</p><ul><li>the <code>3×3</code> inertia matrix <code>M = M_RB + M_A</code>,</li><li>its inverse <code>Minv</code>,</li><li>the linear damping matrix <code>D_lin</code>.</li></ul><p>This is convenient (and faster) if you simulate many steps with fixed parameters.</p><pre><code class="language-julia hljs">model = build_cached_vessel(params)</code></pre><p>The resulting <a href="../api/#MarineSystemsSim.CachedVessel3DOF"><code>CachedVessel3DOF</code></a> is what you pass to your dynamics and ODE solvers.</p><h3 id="1.3-Choose-state-and-input"><a class="docs-heading-anchor" href="#1.3-Choose-state-and-input">1.3 Choose state and input</a><a id="1.3-Choose-state-and-input-1"></a><a class="docs-heading-anchor-permalink" href="#1.3-Choose-state-and-input" title="Permalink"></a></h3><p>The 3-DOF state is</p><p class="math-container">\[\mathbf{X} = [x, y, \psi, u, v, r]^T,\]</p><p>where:</p><ul><li><code>x, y</code> – horizontal position (Earth-fixed frame),</li><li><code>ψ</code> – yaw angle,</li><li><code>u, v</code> – surge and sway velocities (body frame),</li><li><code>r</code> – yaw rate.</li></ul><p>Example initial condition and input:</p><pre><code class="language-julia hljs">X0 = @SVector [0.0, 0.0, 0.0,   # x, y, ψ
               0.0, 0.0, 0.0]   # u, v, r

τ  = @SVector [1.0, 0.0, 0.0]   # constant generalized forces in surge, sway, yaw</code></pre><h3 id="1.4-Define-the-right-hand-side"><a class="docs-heading-anchor" href="#1.4-Define-the-right-hand-side">1.4 Define the right-hand side</a><a id="1.4-Define-the-right-hand-side-1"></a><a class="docs-heading-anchor-permalink" href="#1.4-Define-the-right-hand-side" title="Permalink"></a></h3><p>The core high-level function is <a href="../api/#MarineSystemsSim.vessel_dynamics"><code>vessel_dynamics</code></a>, which computes <code>Ẋ</code> from state, model, and input.</p><p>Out-of-place version:</p><pre><code class="language-julia hljs">f(X, p, t) = vessel_dynamics(SVector{6}(X), p, τ)</code></pre><p>If your solver expects an in-place form, you can wrap it as:</p><pre><code class="language-julia hljs">function f!(dX, X, p, t)
    dX .= f(X, p, t)
    return nothing
end</code></pre><h3 id="1.5-Solve-the-ODE"><a class="docs-heading-anchor" href="#1.5-Solve-the-ODE">1.5 Solve the ODE</a><a id="1.5-Solve-the-ODE-1"></a><a class="docs-heading-anchor-permalink" href="#1.5-Solve-the-ODE" title="Permalink"></a></h3><p>Here is an example using <code>DifferentialEquations.jl</code>:</p><pre><code class="language-julia hljs">using DifferentialEquations

prob = ODEProblem(
    f!,              # in-place RHS
    collect(X0),     # ODEProblem likes a plain Vector
    (0.0, 100.0),    # time span
    model,           # parameters (CachedVessel3DOF)
)

sol = solve(prob, Tsit5(); reltol = 1e-8, abstol = 1e-8)</code></pre><p>You can now inspect the time series:</p><pre><code class="language-julia hljs">x = sol[1, :]
y = sol[2, :]
ψ = sol[3, :]
u = sol[4, :]
v = sol[5, :]
r = sol[6, :]</code></pre><p>and plot them with your preferred plotting library.</p><hr/><h2 id="2.-Lower-level-usage:-build-HydroParams3DOF-by-hand"><a class="docs-heading-anchor" href="#2.-Lower-level-usage:-build-HydroParams3DOF-by-hand">2. Lower-level usage: build <code>HydroParams3DOF</code> by hand</a><a id="2.-Lower-level-usage:-build-HydroParams3DOF-by-hand-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Lower-level-usage:-build-HydroParams3DOF-by-hand" title="Permalink"></a></h2><p>Sometimes you already have the hydrodynamic matrices in <strong>physical form</strong> (e.g. from CFD, your own identification code, or another model that does not use Fossen derivatives directly). In that case you can construct <a href="../api/#MarineSystemsSim.HydroParams3DOF"><code>HydroParams3DOF</code></a> manually.</p><h3 id="2.1-Rigid-body-parameters"><a class="docs-heading-anchor" href="#2.1-Rigid-body-parameters">2.1 Rigid-body parameters</a><a id="2.1-Rigid-body-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#2.1-Rigid-body-parameters" title="Permalink"></a></h3><p>Same as before:</p><pre><code class="language-julia hljs">rb = RigidBody3DOF(10.0, 25.0, 1.5)</code></pre><h3 id="2.2-Added-mass-and-damping-matrices"><a class="docs-heading-anchor" href="#2.2-Added-mass-and-damping-matrices">2.2 Added mass and damping matrices</a><a id="2.2-Added-mass-and-damping-matrices-1"></a><a class="docs-heading-anchor-permalink" href="#2.2-Added-mass-and-damping-matrices" title="Permalink"></a></h3><p>You provide:</p><ul><li><code>M_A</code>: the <code>3×3</code> added-mass matrix (physical sign),</li><li><code>D_lin</code>: the <code>3×3</code> linear damping matrix such that <code>D_lin * ν</code> is the physical linear damping force/moment,</li><li><code>QuadraticDamping3DOF</code>: coefficients used to build the quadratic damping matrix internally.</li></ul><pre><code class="language-julia hljs">using StaticArrays

# Example: diagonal added mass
M_A = @SMatrix [
    1.0   0.0   0.0;
    0.0   2.0   0.0;
    0.0   0.0   0.5,
]

# Example: diagonal linear damping (positive diagonal → dissipative)
D_lin = @SMatrix [
    1.0   0.0   0.0;
    0.0   2.0   0.0;
    0.0   0.0   3.0,
]

# Quadratic damping coefficients. When constructed via
# hydroparams_fossen3dof these are Fossen-style derivatives Xuu,Yvv,Nrr.
D_quad = QuadraticDamping3DOF(
    -0.1,   # Xuu
    -0.2,   # Yvv
    -0.3,   # Nrr
)

hydro = HydroParams3DOF(M_A, D_lin, D_quad)
params = VesselParams3DOF(rb, hydro)
model  = build_cached_vessel(params)</code></pre><p>From here you can use the same high-level functions as before:</p><pre><code class="language-julia hljs">ν   = @SVector [1.0, 0.2, 0.01]   # body-fixed velocity [u, v, r]
τ   = @SVector [0.0, 0.0, 0.0]

Dν  = damping_forces(ν, model)    # D(ν) ν
Cν  = coriolis_forces(ν, model)   # C(ν) ν
ν̇   = body_dynamics(ν, model, τ) # ν̇ given τ

ψ    = 0.3
η    = @SVector [0.0, 0.0, ψ]
η̇   = kinematics(η, ν)           # [ẋ, ẏ, ψ̇]</code></pre><p>This “by hand” workflow gives you full control over the matrices while reusing the kinematics and dynamics code from <code>MarineSystemsSim.jl</code>.</p><h2 id="3.-Units-and-automatic-differentiation"><a class="docs-heading-anchor" href="#3.-Units-and-automatic-differentiation">3. Units and automatic differentiation</a><a id="3.-Units-and-automatic-differentiation-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Units-and-automatic-differentiation" title="Permalink"></a></h2><h3 id="Units-with-Unitful.jl"><a class="docs-heading-anchor" href="#Units-with-Unitful.jl">Units with <code>Unitful.jl</code></a><a id="Units-with-Unitful.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Units-with-Unitful.jl" title="Permalink"></a></h3><p><code>RigidBody3DOF</code> has a constructor that accepts Unitful quantities and converts them to SI units internally:</p><pre><code class="language-julia-repl hljs">julia&gt; using Unitful

julia&gt; rb = RigidBody3DOF(10_000u&quot;kg&quot;, 2.0e6u&quot;kg*m^2&quot;, 1.5u&quot;m&quot;);

julia&gt; rb.m
10000.0

julia&gt; rb.xG
1.5</code></pre><p>This allows you to work in whatever mass/length units you like at the API boundary while keeping the internal state dimensionless and fast.</p><h3 id="Automatic-differentiation-with-ForwardDiff.jl"><a class="docs-heading-anchor" href="#Automatic-differentiation-with-ForwardDiff.jl">Automatic differentiation with <code>ForwardDiff.jl</code></a><a id="Automatic-differentiation-with-ForwardDiff.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-differentiation-with-ForwardDiff.jl" title="Permalink"></a></h3><p>The dynamics functions are written to be compatible with dual numbers, so you can differentiate them with <code>ForwardDiff.jl</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; using ForwardDiff, StaticArrays

julia&gt; rb = RigidBody3DOF(10.0, 20.0, 0.0);

julia&gt; hydro = hydroparams_fossen3dof(
           0.1, 0.2, 0.0, 0.3,
           -1.0, -1.0, -1.0, -1.0, -1.0,
           -0.1, -0.1, -0.1,
       );

julia&gt; params = VesselParams3DOF(rb, hydro);

julia&gt; model = build_cached_vessel(params);

julia&gt; ν0 = @SVector [1.0, 0.5, -0.2];

julia&gt; τ0 = @SVector [0.0, 0.0, 0.0];

julia&gt; f(ν_vec) = body_dynamics(SVector{3}(ν_vec), model, τ0);

julia&gt; J = ForwardDiff.jacobian(f, collect(ν0));

julia&gt; size(J)
(3, 3)</code></pre><p>Here <code>J</code> is the Jacobian (\partial \dot{\nu} / \partial \nu), which you can use for linearization, MPC, or sensitivity analysis.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../model_3dof/">3-DOF model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.0 on <span class="colophon-date" title="Tuesday 18 November 2025 23:10">Tuesday 18 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
